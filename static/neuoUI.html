<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Data Generator - Instantly Create Realistic Sample Data for Your Database</title>
  <meta name="description"
    content="Generate realistic, AI-powered sample data for your database schema in seconds. Connect directly or via a secure MCP server‚Äîno manual setup, no dummy data hassles.">
  <meta name="author" content="Your Name or Company Name">
  <meta name="keywords"
    content="data generator, AI data, database testing, sample data, schema generator, mock data, test data, MCP server, DB tools">
  <link rel="icon" type="image/png" href="/favicon.png">
  <meta property="og:title" content="Data Generator - Instantly Create Realistic Sample Data for Your Database">
  <meta property="og:description"
    content="Generate realistic, AI-powered sample data for your database schema in seconds. Connect directly or via a secure MCP server‚Äîno manual setup, no dummy data hassles.">
  <meta property="og:image" content="/og-image.png">
  <meta property="og:url" content="https://yourdomain.com">
  <meta name="twitter:card" content="summary_large_image">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      --btn-primary: #667eea;
      --btn-secondary: #764ba2;
      --btn-success: #10b981;
      --btn-danger: #ef4444;
      --bg-color: #e0e5ec;
      --text-color: #2c3e50;
      --shadow-light: #ffffff;
      --shadow-dark: #a3b1c6;
    }

    body {
      font-family: 'Inter', 'Segoe UI', sans-serif;
      background: var(--bg-color);
      color: var(--text-color);
      overflow-x: hidden;
      min-height: 100vh;
    }

    .app-container {
      display: flex;
      height: 100vh;
    }

    /* .sidebar {
    width: 260px;
    padding: 2rem 0;
    background: var(--bg-color);
    box-shadow: 5px 5px 10px var(--shadow-dark), -5px -5px 10px var(--shadow-light);
  } */

    /* Sidebar collapsed by default */
    .sidebar {
      width: 100px;
      /* or 70px, up to you */
      transition: width 0.3s ease;
      overflow-x: hidden;
      position: relative;
    }

    /* Expand on hover */
    .sidebar:hover {
      width: 260px;
    }

    /* Menu items layout */
    .sidebar .menu-item {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      padding: 1rem 1.25rem;
      transition: all 0.3s ease;
      position: relative;
    }

    /* Icon stays left-aligned always */
    .sidebar .menu-item span:first-child {
      width: 24px;
      min-width: 24px;
      text-align: center;
      font-size: 1.2rem;
    }

    /* Text label fades in/out but keeps space reserved */
    .sidebar .menu-item span:last-child {
      opacity: 0;
      transform: translateX(-10px);
      visibility: hidden;
      transition: all 0.25s ease;
      white-space: nowrap;
    }

    /* Show text smoothly when expanded */
    .sidebar:hover .menu-item span:last-child {
      opacity: 1;
      transform: translateX(0);
      visibility: visible;
    }

    /* Keep alignment consistent when collapsed */
    .sidebar .menu-item {
      justify-content: flex-start;
    }

    /* Optional: adjust padding on hover for smoother look */
    .sidebar:hover .menu-item {
      padding-left: 1.5rem;
    }

    .logo {
      padding: 0 1.5rem 2rem;
      font-size: 1.5rem;
      font-weight: 700;
    }

    .menu-item {
      padding: 1rem 1.5rem;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 0.75rem;
      font-weight: 500;
      margin: 0.5rem 1rem;
      border-radius: 15px;
    }

    .menu-item:hover {
      box-shadow: inset 3px 3px 6px var(--shadow-dark), inset -3px -3px 6px var(--shadow-light);
    }

    .menu-item.active {
      box-shadow: inset 4px 4px 8px var(--shadow-dark), inset -4px -4px 8px var(--shadow-light);
      border-left: 4px solid var(--btn-primary);
    }

    .main-content {
      flex: 1;
      overflow-y: auto;
      padding: 2rem;
    }

    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 2rem;
      flex-wrap: wrap;
      gap: 1rem;
    }

    .header h1 {
      font-size: 2rem;
      font-weight: 700;
    }

    /* Dark Mode Styles */
    body.dark-mode {
      --bg-color: #1e293b;
      --text-color: #f1f5f9;
      --shadow-light: #2e3a4e;
      --shadow-dark: #0f172a;
    }


    .theme-toggle {
      background: var(--bg-color);
      border: none;
      color: var(--text-color);
      width: 50px;
      height: 50px;
      border-radius: 50%;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      transition: all 0.3s ease;
      box-shadow: 5px 5px 10px var(--shadow-dark), -5px -5px 10px var(--shadow-light);
    }

    .theme-toggle:hover {
      box-shadow: 3px 3px 6px var(--shadow-dark), -3px -3px 6px var(--shadow-light);
    }

    .theme-toggle:active {
      box-shadow: inset 3px 3px 6px var(--shadow-dark), inset -3px -3px 6px var(--shadow-light);
    }

    .card {
      padding: 2rem;
      border-radius: 20px;
      margin-bottom: 1.5rem;
      background: var(--bg-color);
      box-shadow: 9px 9px 16px var(--shadow-dark), -9px -9px 16px var(--shadow-light);
      transition: all 0.3s ease;
    }

    .card:hover {
      box-shadow: 12px 12px 20px var(--shadow-dark), -12px -12px 20px var(--shadow-light);
    }

    .dashboard-stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 1.5rem;
      margin-bottom: 2rem;
    }

    .stat-card {
      padding: 1.5rem;
      border-radius: 20px;
      text-align: center;
    }

    .stat-label {
      font-size: 0.875rem;
      opacity: 0.8;
      margin-bottom: 0.5rem;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .stat-value {
      font-size: 1.5rem;
      font-weight: 700;
    }

    .connect-container {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 2rem;
      max-width: 1200px;
      margin: 0 auto;
    }

    .connect-section h3 {
      margin-bottom: 1.5rem;
      font-size: 1.25rem;
    }

    label {
      display: block;
      margin: 1rem 0 0.5rem;
      font-weight: 500;
      font-size: 0.9rem;
    }

    input,
    select {
      width: 100%;
      padding: 0.75rem;
      border-radius: 15px;
      border: none;
      background: var(--bg-color);
      color: var(--text-color);
      font-size: 1rem;
      transition: all 0.3s ease;
      box-shadow: inset 4px 4px 8px var(--shadow-dark), inset -4px -4px 8px var(--shadow-light);
    }

    input:focus,
    select:focus {
      outline: none;
      box-shadow: inset 6px 6px 10px var(--shadow-dark), inset -6px -6px 10px var(--shadow-light);
    }

    .button-group {
      display: flex;
      gap: 1rem;
      margin-top: 2rem;
      justify-content: center;
      flex-wrap: wrap;
    }

    .btn {
      padding: 0.875rem 2rem;
      border: none;
      border-radius: 15px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 1rem;
      background: var(--bg-color);
      color: var(--text-color);
      box-shadow: 5px 5px 10px var(--shadow-dark), -5px -5px 10px var(--shadow-light);
    }

    .btn:hover {
      box-shadow: 3px 3px 6px var(--shadow-dark), -3px -3px 6px var(--shadow-light);
    }

    .btn:active {
      box-shadow: inset 3px 3px 6px var(--shadow-dark), inset -3px -3px 6px var(--shadow-light);
    }

    .btn-primary {
      background: linear-gradient(135deg, var(--btn-primary) 0%, var(--btn-secondary) 100%);
      color: white;
      box-shadow: 5px 5px 10px rgba(102, 126, 234, 0.3), -5px -5px 10px rgba(255, 255, 255, 0.8);
    }

    .btn-success {
      background: var(--btn-success);
      color: white;
      box-shadow: 5px 5px 10px rgba(16, 185, 129, 0.3), -5px -5px 10px rgba(255, 255, 255, 0.8);
    }

    pre {
      background: var(--bg-color);
      padding: 1rem;
      border-radius: 15px;
      overflow-x: auto;
      max-height: 400px;
      font-size: 0.875rem;
      margin-top: 1rem;
      box-shadow: inset 4px 4px 8px var(--shadow-dark), inset -4px -4px 8px var(--shadow-light);
    }

    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.3);
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }

    .modal.active {
      display: flex;
    }

    .modal-content {
      padding: 2rem;
      border-radius: 20px;
      max-width: 500px;
      width: 90%;
      background: var(--bg-color);
      box-shadow: 12px 12px 24px var(--shadow-dark), -12px -12px 24px var(--shadow-light);
    }

    .modal-header {
      font-size: 1.5rem;
      font-weight: 700;
      margin-bottom: 1.5rem;
    }

    .color-picker-group {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 1rem;
      margin-top: 1rem;
    }

    .color-picker-item {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }

    input[type="color"] {
      height: 50px;
      cursor: pointer;
      border-radius: 15px;
      border: none;
      box-shadow: inset 4px 4px 8px var(--shadow-dark), inset -4px -4px 8px var(--shadow-light);
    }

    .section-content {
      max-width: 1200px;
      margin: 0 auto;
    }

    .generate-controls {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1rem;
      margin-bottom: 2rem;
    }

    small {
      display: block;
      margin-top: 0.25rem;
      opacity: 0.7;
      font-size: 0.8rem;
    }

    code {
      background: var(--bg-color);
      padding: 0.2rem 0.4rem;
      border-radius: 8px;
      font-family: 'Courier New', monospace;
      box-shadow: inset 2px 2px 4px var(--shadow-dark), inset -2px -2px 4px var(--shadow-light);
    }

    @media (max-width: 768px) {
      .connect-container {
        grid-template-columns: 1fr;
      }

      .sidebar {
        width: 70px;
      }

      .logo {
        font-size: 1.2rem;
      }

      .menu-item span:last-child {
        display: none;
      }
    }
  </style>
</head>

<body>

  <div class="app-container">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="logo">‚ö°</div>
      <div class="menu-item active" data-page="dashboard">
        <span>üìä</span><span>Dashboard</span>
      </div>
      <div class="menu-item" data-page="connect">
        <span>üîå</span><span>Connect</span>
      </div>
      <div class="menu-item" data-page="schema">
        <span>üìã</span><span>Schema</span>
      </div>
      <div class="menu-item" data-page="generate">
        <span>üé≤</span><span>Generate</span>
      </div>
      <div class="menu-item" data-page="settings">
        <span>‚öôÔ∏è</span><span>Settings</span>
      </div>
      <div class="menu-item" data-page="about">
        <span>‚ÑπÔ∏è</span><span>About</span>
      </div>
      <div class="menu-item" data-page="share">
        <span>üì§</span><span>Share</span>
      </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Dashboard Page -->
      <div id="dashboard" class="page">
        <div class="header">
          <h1>Dashboard</h1>
          <button class="theme-toggle" id="themeToggle">üåô</button>
        </div>

        <div class="dashboard-stats">
          <div class="card stat-card">
            <div class="stat-label">Connected Database</div>
            <div class="stat-value" id="connectedDb">Not Connected</div>
          </div>
          <div class="card stat-card">
            <div class="stat-label">Current Date & Time</div>
            <div class="stat-value" id="currentDateTime">--</div>
          </div>
        </div>

        <div class="card">
          <h3>Welcome to Data Generator Tool</h3>
          <p style="margin-top: 1rem; line-height: 1.6;">
            Generate synthetic data for your PostgreSQL databases with ease. Connect to your database,
            fetch the schema, and generate realistic data in batches.
          </p>
        </div>
      </div>

      <!-- Connect Page -->
      <div id="connect" class="page" style="display: none;">
        <div class="header">
          <h1>Connect to Database</h1>
          <button class="theme-toggle">üåô</button>
        </div>

        <div class="section-content">
          <div class="connect-container">
            <!-- Left: DB Credentials -->
            <div class="card connect-section">
              <h3>Use DB Credentials</h3>
              <label>Host</label>
              <input type="text" id="host" value="localhost" />

              <label>Port</label>
              <input type="number" id="port" value="5432" />

              <label>User</label>
              <input type="text" id="user" />

              <label>Password</label>
              <input type="password" id="password" />

              <label>Database</label>
              <input type="text" id="database" />

              <label>Mode</label>
              <select id="mode" required>
                <option value="sync">Sync</option>
                <option value="async">Async</option>
              </select>
            </div>

            <!-- Right: MCP -->
            <div class="card connect-section">
              <h3>MCP (Model Context Protocol)</h3>
              <label>MCP Server URL (optional)</label>
              <input type="text" id="mcp-url" placeholder="http://localhost:8000/mcp"
                value="http://localhost:8000/mcp" />
              <small>Note: MCP server should have an <code>async_pg</code> tool that returns the asyncpg pool.</small>
            </div>
          </div>

          <div class="button-group">
            <button class="btn btn-primary" id="connectBtn">Connect</button>
            <button class="btn btn-success" id="connectGenerateBtn">Connect & Generate</button>
          </div>

          <div class="card" style="margin-top: 2rem;">
            <h3>Connection Status</h3>
            <pre id="conn-result">Not connected yet...</pre>
          </div>
        </div>
      </div>

      <!-- Schema Page -->
      <div id="schema" class="page" style="display: none;">
        <div class="header">
          <h1>Database Schema</h1>
          <button class="theme-toggle">üåô</button>
        </div>

        <div class="section-content">
          <button class="btn btn-primary" id="fetchSchemaBtn">Fetch Schema</button>

          <div class="card" style="margin-top: 2rem;">
            <h3>Schema Details</h3>
            <pre id="schema-result">Click 'Fetch Schema' to load database schema...</pre>
          </div>
        </div>
      </div>

      <!-- Generate Page -->
      <div id="generate" class="page" style="display: none;">
        <div class="header">
          <h1>Generate Data</h1>
          <button class="theme-toggle">üåô</button>
        </div>

        <div class="section-content">
          <div class="card">
            <h3>Generation Parameters</h3>
            <div class="generate-controls">
              <div>
                <label>Batch Size</label>
                <input type="number" id="batch-size" min="1" max="100" value="10" />
              </div>
              <div>
                <label>Rows Count Per Table</label>
                <input type="number" id="row-count" min="1" max="10000" value="100" />
              </div>
            </div>
            <button class="btn btn-success" id="generateDataBtn">Generate & Insert Data</button>
          </div>

          <div class="card" style="margin-top: 2rem;">
            <h3>Generation Results</h3>
            <pre id="data-gen-result">Configure parameters and click 'Generate & Insert Data'...</pre>
          </div>
        </div>
      </div>

      <!-- Settings Page -->
      <div id="settings" class="page" style="display: none;">
        <div class="header">
          <h1>Settings</h1>
          <button class="theme-toggle">üåô</button>
        </div>

        <div class="section-content">
          <div class="card">
            <h3>Appearance</h3>
            <p style="margin-top: 1rem;">You're using the <strong>Neumorphism</strong> design style.</p>
          </div>

          <div class="card">
            <h3>Colors</h3>
            <div class="color-picker-group">
              <div class="color-picker-item">
                <label>Primary Button</label>
                <input type="color" id="colorPrimary" value="#667eea" />
              </div>
              <div class="color-picker-item">
                <label>Secondary Button</label>
                <input type="color" id="colorSecondary" value="#764ba2" />
              </div>
              <div class="color-picker-item">
                <label>Success Button</label>
                <input type="color" id="colorSuccess" value="#10b981" />
              </div>
              <div class="color-picker-item">
                <label>Danger Button</label>
                <input type="color" id="colorDanger" value="#ef4444" />
              </div>
            </div>
            <button class="btn btn-primary" id="saveColorsBtn" style="margin-top: 1.5rem;">Save Colors</button>
          </div>
        </div>
      </div>

      <!-- About Page -->
      <div id="about" class="page" style="display: none;">
        <div class="header">
          <h1>About</h1>
          <button class="theme-toggle">üåô</button>
        </div>

        <div class="section-content">
          <div class="card">
            <h3>Data Generator Tool</h3>
            <p style="margin-top: 1rem; line-height: 1.8;">
              <strong>Version 2.0 - Neumorphism Edition</strong><br><br>
              A modern, powerful tool for generating synthetic data for PostgreSQL databases.
              Supports both synchronous and asynchronous connections, MCP protocol integration,
              and flexible data generation options.
            </p>
          </div>
        </div>
      </div>

      <!-- Share Page -->
      <div id="share" class="page" style="display: none;">
        <div class="header">
          <h1>Share</h1>
          <button class="theme-toggle">üåô</button>
        </div>

        <div class="section-content">
          <div class="card">
            <h3>Share this Tool</h3>
            <p style="margin-top: 1rem;">Share the Data Generator Tool with your team!</p>
            <div class="button-group">
              <button class="btn btn-primary" onclick="showPopup('Share functionality coming soon!')">Copy Link</button>
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>

  <!-- Modal for Connect & Generate -->
  <div id="batchModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">Configure Generation</div>
      <label>Batch Size</label>
      <input type="number" id="modalBatchSize" min="1" max="100" value="10" />

      <label>Rows Count Per Table</label>
      <input type="number" id="modalRowCount" min="1" max="10000" value="100" />

      <div class="button-group">
        <button class="btn btn-success" id="modalProceedBtn">Proceed</button>
        <button class="btn" id="modalCancelBtn">Cancel</button>
      </div>
    </div>
  </div>

  <script>
    let currentMode = 'sync';
    let currentSchema = null;

    // Update date/time
    function updateDateTime() {
      const now = new Date();
      const options = {
        weekday: 'short',
        year: 'numeric',
        month: 'short',
        day: 'numeric',
        hour: '2-digit',
        minute: '2-digit'
      };
      document.getElementById('currentDateTime').textContent = now.toLocaleDateString('en-US', options);
    }
    updateDateTime();
    setInterval(updateDateTime, 60000);

    // Page navigation
    const menuItems = document.querySelectorAll('.menu-item');
    const pages = document.querySelectorAll('.page');

    menuItems.forEach(item => {
      item.addEventListener('click', () => {
        menuItems.forEach(mi => mi.classList.remove('active'));
        item.classList.add('active');

        const pageName = item.dataset.page;
        pages.forEach(page => page.style.display = 'none');
        document.getElementById(pageName).style.display = 'block';
      });
    });

    // Theme toggle (light/dark)
    const themeToggles = document.querySelectorAll('.theme-toggle');
    themeToggles.forEach(toggle => {
      toggle.addEventListener('click', () => {
        document.body.classList.toggle('dark-mode');

        // Toggle icon between üåô and ‚òÄÔ∏è
        const isDark = document.body.classList.contains('dark-mode');
        themeToggles.forEach(btn => btn.textContent = isDark ? '‚òÄÔ∏è' : 'üåô');

        // Click animation
        toggle.style.transform = 'scale(0.9)';
        setTimeout(() => {
          toggle.style.transform = 'scale(1)';
        }, 200);
      });
    });


    // Color customization
    document.getElementById('saveColorsBtn').addEventListener('click', () => {
      const primary = document.getElementById('colorPrimary').value;
      const secondary = document.getElementById('colorSecondary').value;
      const success = document.getElementById('colorSuccess').value;
      const danger = document.getElementById('colorDanger').value;

      document.documentElement.style.setProperty('--btn-primary', primary);
      document.documentElement.style.setProperty('--btn-secondary', secondary);
      document.documentElement.style.setProperty('--btn-success', success);
      document.documentElement.style.setProperty('--btn-danger', danger);

      showPopup('Colors saved successfully!');
    });

    // Connect button
    document.getElementById('connectBtn').addEventListener('click', async () => {
      document.getElementById('conn-result').textContent = "Connecting...";

      const mcp_url = document.getElementById('mcp-url').value || null;
      const host = document.getElementById('host').value;
      const port = parseInt(document.getElementById('port').value);
      const user = document.getElementById('user').value;
      const password = document.getElementById('password').value;
      const database = document.getElementById('database').value;
      const mode = document.getElementById('mode').value;
      currentMode = mode;

      try {
        const res = await fetch('/connect-db', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ host, port, user, password, database, mode, db_type: 'postgres', mcp_url })
        });
        const data = await res.json();
        if (res.ok) {
          document.getElementById('conn-result').textContent = JSON.stringify(data, null, 2);
          document.getElementById('connectedDb').textContent = database || 'Connected';
        } else {
          document.getElementById('conn-result').textContent = `Error: ${data.detail}`;
        }
      } catch (err) {
        document.getElementById('conn-result').textContent = `Fetch error: ${err.message}`;
      }
    });

    // Connect & Generate button - show modal
    document.getElementById('connectGenerateBtn').addEventListener('click', () => {
      document.getElementById('batchModal').classList.add('active');
    });

    // Modal cancel
    document.getElementById('modalCancelBtn').addEventListener('click', () => {
      document.getElementById('batchModal').classList.remove('active');
    });

    // Modal proceed
    document.getElementById('modalProceedBtn').addEventListener('click', async () => {
      const batchSize = parseInt(document.getElementById('modalBatchSize').value);
      const rowCount = parseInt(document.getElementById('modalRowCount').value);

      document.getElementById('batchModal').classList.remove('active');
      document.getElementById('conn-result').textContent = "Connecting and generating data...";

      const mcp_url = document.getElementById('mcp-url').value || null;
      const host = document.getElementById('host').value;
      const port = parseInt(document.getElementById('port').value);
      const user = document.getElementById('user').value;
      const password = document.getElementById('password').value;
      const database = document.getElementById('database').value;
      const mode = document.getElementById('mode').value;
      currentMode = mode;

      try {
        // 1. Connect
        const resConnect = await fetch('/connect-db', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ host, port, user, password, database, mode, db_type: 'postgres', mcp_url })
        });
        const dataConnect = await resConnect.json();
        if (!resConnect.ok) {
          document.getElementById('conn-result').textContent = `Connection error: ${dataConnect.detail}`;
          return;
        }
        document.getElementById('connectedDb').textContent = database || 'Connected';

        // 2. Fetch schema
        const schema = await fetchSchema();
        if (!schema) return;

        // 3. Generate data
        await generateData(batchSize, rowCount);

      } catch (err) {
        document.getElementById('conn-result').textContent = `Error: ${err.message}`;
      }
    });

    // Fetch schema
    document.getElementById('fetchSchemaBtn').addEventListener('click', async () => {
      await fetchSchema();
    });

    async function fetchSchema() {
      document.getElementById('schema-result').textContent = "Fetching schema...";
      try {
        const res = await fetch(`/get-schema?mode=${currentMode}`);
        const data = await res.json();
        if (res.ok) {
          currentSchema = data.schema;
          document.getElementById('schema-result').textContent = JSON.stringify(currentSchema, null, 2);
          return currentSchema;
        } else {
          document.getElementById('schema-result').textContent = `Error: ${data.detail}`;
          return null;
        }
      } catch (err) {
        document.getElementById('schema-result').textContent = `Fetch error: ${err.message}`;
        return null;
      }
    }

    // Generate data
    document.getElementById('generateDataBtn').addEventListener('click', async () => {
      const batchSize = parseInt(document.getElementById('batch-size').value);
      const rowCount = parseInt(document.getElementById('row-count').value);
      await generateData(batchSize, rowCount);
    });

    async function generateData(batchSize, rowCount) {
      if (!currentSchema) {
        showPopup("No schema available! Please fetch schema first.");
        return;
      }

      const resultElement = document.getElementById('data-gen-result') || document.getElementById('conn-result');
      resultElement.textContent = "Generating data...";

      const payload = {
        batch_size: batchSize,
        row_count: rowCount,
        table_schema: currentSchema
      };

      try {
        const res = await fetch('/generate-data', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(payload)
        });
        const data = await res.json();
        if (res.ok) {
          resultElement.textContent = JSON.stringify(data, null, 2);
        } else {
          resultElement.textContent = `Error: ${data.detail}`;
        }
      } catch (err) {
        resultElement.textContent = `Fetch error: ${err.message}`;
      }
    }
  </script>
  <!-- Modern Center Popup -->
  <div id="popup" style="
  position: fixed;
  top: 10%;
  left: 50%;
  transform: translate(-50%, -50%) scale(0.9);
  background: linear-gradient(135deg, #667eea, #764ba2);
  color: white;
  padding: 1.5rem 2rem;
  border-radius: 12px;
  box-shadow: 0 6px 30px rgba(0, 0, 0, 0.35);
  font-weight: 600;
  font-size: 1.1rem;
  opacity: 0;
  transition: all 0.4s ease;
  z-index: 2000;
  text-align: center;
  pointer-events: none;
"></div>

  <script>
    function showPopup(message, duration = 2500) {
      const popup = document.getElementById('popup');
      popup.textContent = message;
      popup.style.opacity = '1';
      popup.style.transform = 'translate(-50%, -50%) scale(1)';

      setTimeout(() => {
        popup.style.opacity = '0';
        popup.style.transform = 'translate(-50%, -50%) scale(0.9)';
      }, duration);
    }
  </script>
</body>
</html>